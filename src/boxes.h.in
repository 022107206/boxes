/*
 *  File:             boxes.h
 *  Date created:     March 18, 1999 (Thursday, 15:09h)
 *  Author:           Thomas Jensen
 *                    tsjensen@stud.informatik.uni-erlangen.de
 *  Version:          $Id: boxes.h,v 1.5 1999/04/04 16:10:51 tsjensen Exp tsjensen $
 *  Language:         ANSI C
 *  Purpose:          Project-wide globals and data structures
 *  Remarks:          ---
 *
 *  Revision History:
 *
 *    $Log: boxes.h,v $
 *    Revision 1.5  1999/04/04 16:10:51  tsjensen
 *    Added some flags to design structure
 *    Move default settings here from boxes.c
 *
 *    Revision 1.4  1999/03/31 17:34:43  tsjensen
 *    ... still programming ...
 *    Added minwidth and minheight to design structure
 *
 *    Revision 1.3  1999/03/30 09:36:58  tsjensen
 *    ... still programming ...
 *    It drew a correct box for the first time!
 *
 *    Revision 1.2  1999/03/19 17:51:19  tsjensen
 *    ... still programming ...
 *
 *    Revision 1.1  1999/03/18 15:09:34  tsjensen
 *    Initial revision
 *
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 */

#ifndef BOXES_H
#define BOXES_H

#include "regexp.h"


#pragma ident "$Id: boxes.h,v 1.5 1999/04/04 16:10:51 tsjensen Exp tsjensen $"

#define PROJECT "boxes"                  /* name of program */
#define VERSION "1.0"                    /* current release of project */


/*
 *  default settings of all kinds (THIS PARAGRAPH MAY BE EDITED)
 */
#define DEF_TABSTOP     8                /* default tab stop distance (-t) */
#define DEF_INDENTMODE  'b'              /* indent box, not text by default */


#define __TJ(s) fprintf (stderr, s);

/*
 *  some systems (especially sunos4) do not define EXIT_* constants
 */
#ifndef EXIT_FAILURE
#define EXIT_FAILURE    1
#endif
#ifndef EXIT_SUCCESS
#define EXIT_SUCCESS    0
#endif

/*  free memory and set pointer to NULL
 */
#define BFREE(p) {    \
   if (p) {           \
      free (p);       \
      (p) = NULL;     \
   }                  \
}


extern char *shape_name[];

#define ANZ_SHAPES 16

typedef enum {
    NW, NNW, N, NNE, NE, ENE, E, ESE, SE, SSE, S, SSW, SW, WSW, W, WNW
} shape_t;

#define SHAPES_PER_SIDE 5
#define ANZ_SIDES       4
#define ANZ_CORNERS     4

extern shape_t north_side[SHAPES_PER_SIDE];  /* groups of shapes, clockwise */
extern shape_t east_side[SHAPES_PER_SIDE];
extern shape_t south_side[SHAPES_PER_SIDE];
extern shape_t west_side[SHAPES_PER_SIDE];
extern shape_t corners[ANZ_CORNERS];
extern shape_t *sides[ANZ_SIDES];

#define BTOP 0                             /* for use width sides */
#define BRIG 1
#define BBOT 2
#define BLEF 3

typedef struct {
    char **chars;
    size_t height;
    size_t width;
    int    elastic;          /* elastic is used only in orginial definition */
} sentry_t;

#define SENTRY_INITIALIZER (sentry_t) {NULL, 0, 0, 0}


typedef struct {
    char   *search;
    char   *repstr;
    regexp *prog;                        /* compiled search pattern */
    int     line;                        /* line of definition in config file */
    char    mode;                        /* 'g' or 'o' */
} reprule_t;


typedef struct {
    char      *name;
    char      *author;
    char      *created;
    char      *revision;
    char      *revdate;
    char      *sample;
    size_t     minwidth;
    size_t     minheight;
    char       indentmode;               /* 'b', 't', or 'n' */
    reprule_t *current_reprule;
    reprule_t *reprules;
    size_t     anz_reprules;
    sentry_t   shape[ANZ_SHAPES];
} design_t;

extern design_t *designs;
extern int design_idx;

extern int yylineno;

int isempty (const sentry_t *);
int yyerror (const char *, ...);
size_t widest (const sentry_t *, const int, ...);
size_t highest (const sentry_t *, const int, ...);

#endif /* BOXES_H */


/*EOF*/                                          /* vim: set cindent sw=4: */
